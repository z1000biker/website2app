version: '3.8'

services:
  website2app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: website2app
    volumes:
      # Mount output directory for built APKs/iOS projects
      - ./output:/app/output
      # Mount web content (optional)
      - ./web_content:/app/web_content:ro
    environment:
      - QT_QPA_PLATFORM=offscreen
    # For GUI access, use X11 forwarding (Linux only)
    # environment:
    #   - DISPLAY=${DISPLAY}
    # volumes:
    #   - /tmp/.X11-unix:/tmp/.X11-unix
    restart: "no"

  # Optional: Build service for CI/CD (headless builds)
  builder:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: website2app-builder
    volumes:
      - ./output:/app/output
      - ./web_content:/app/web_content:ro
    environment:
      - QT_QPA_PLATFORM=offscreen
    entrypoint: [ "python", "-c", "print('Builder ready. Override entrypoint with build commands.')" ]
